<!DOCTYPE html>
<html>
<head>
    <title>Hand Drip Coffee calculator</title>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>

<div class="container">
    <h2 class="text-center mt-5">Hand Drip Coffee Calculator</h2>

    <form class="m-5">
        <div class="form-group">
            <label for="coffeeGrounds">Coffee Grounds in grams: 
                <span id="coffeeGroundsValue" class="badge badge-secondary"></span>
            </label>
            <input type="range" class="custom-range" min="1" max="100" value="15" id="coffeeGrounds" name="coffeeGrounds">
        </div>

        <div class="form-group">
            <label for="brewRatio">Brew Ratio: 
                <span id="brewRatioValue" class="badge badge-secondary"></span>
            </label>
            <input type="range" class="custom-range" min="1" max="20" value="15" id="brewRatio" name="brewRatio">
        </div>
    </form>

    <div id="result" class="row"></div>
</div>

<script>
    document.getElementById('coffeeGrounds').addEventListener('input', function() {
        calcPours(this.value, document.getElementById('brewRatio').value);
    });

    document.getElementById('brewRatio').addEventListener('input', function() {
        calcPours(document.getElementById('coffeeGrounds').value, this.value);
    });

    function calcPours(coffeeGrounds, brewRatio) {
        document.getElementById('coffeeGroundsValue').innerText = coffeeGrounds + 'g';
        document.getElementById('brewRatioValue').innerText = '1:' + brewRatio;
        
        if (coffeeGrounds && brewRatio) {
            var totalWater = coffeeGrounds * brewRatio;

            var resultHTML = '';
            
            var firstPour1 = (2/7 * totalWater).toFixed(2); // adjust the pour sizes to totals
            var secondPour1 = (5/7 * totalWater).toFixed(2);
            resultHTML += createResultCard('Sweetness', firstPour1, secondPour1);
            
            var firstPour2 = (1/2 * totalWater).toFixed(2);
            var secondPour2 = (1/2 * totalWater).toFixed(2);
            resultHTML += createResultCard('Balanced Flavour', firstPour2, secondPour2);
            
            var firstPour3 = (2/3 * totalWater).toFixed(2);
            var secondPour3 = (1/3 * totalWater).toFixed(2);
            resultHTML += createResultCard('Acidic Flavour', firstPour3, secondPour3);
            
            document.getElementById('result').innerHTML = resultHTML;
        } else {
            document.getElementById('result').innerHTML = "<div class='alert alert-danger col-12' role='alert'>Please input the amount of coffee grounds and brew ratio.</div>";
        }
    }
    
    function createResultCard(title, firstPour, secondPour) {
        var totalPour = parseFloat(firstPour) + parseFloat(secondPour);
        var resultHTML = "<div class='col-sm-4 mb-4'>";
        resultHTML += "<div class='card h-100'>";
        resultHTML += "<div class='card-header'>" + title + "</div>";
        resultHTML += "<div class='card-body'>";
        resultHTML += "<p class='card-text'>First pour: " + firstPour + "g.<br>Second pour: " + secondPour + "g.<br><strong>Total: " + totalPour.toFixed(2) + "g.</strong></p>";
        resultHTML += "</div></div></div>";
        return resultHTML;
    }

    // Initial calculation on page load
    calcPours(document.getElementById('coffeeGrounds').value, document.getElementById('brewRatio').value);
</script>

</body>
</html>
